{"version":3,"sources":["default_recipe.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","jQuery","$","errorMessage","fieldName","console","log","resetMessages","commentForm","querySelector","classList","remove","click","rating","target","id","replace","val","addClass","removeClass","submit","event","errorfound","preventDefault","phno","email","kids","getElementsByTagName","value","name","regex","test","regexPattern","RegExp","url","document","getElementById","params","URLSearchParams","FormData","add","fetch","method","body","then","res","json","catch","error","response","status","alert","message","reset","resetStars","ajaxSubmitForm"],"mappings":"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","file":"default_recipe.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n/* IIFE function */\njQuery(function ($) {\n     /* Hide messages */\n     /*\r\n     Add the event to the star...\r\n     when clicked the field value is updated\r\n     and the stars are swaped to marked\r\n     */\n     $(\".input_rating\").click(function (e) {\n          var rating = e.target.id.replace(\"input_rating_\", \"\");\n          $(\"#rating\").val(rating);\n          for (var i = 1; i < 6; i++) {\n               console.log(\"#input_rating_\" + i + ' - ' + rating);\n               if (i <= rating) {\n                    $(\"#input_rating_\" + i).addClass(\"active-star\");\n                    $(\"#input_rating_\" + i).removeClass(\"inactive-star\");\n               } else {\n                    $(\"#input_rating_\" + i).addClass(\"inactive-star\");\n                    $(\"#input_rating_\" + i).removeClass(\"active-star\");\n               }\n          }\n     });\n     $(\"#commentform\").submit(function (event) {\n          var errorfound = false;\n\n          event.preventDefault();\n          /* Check that all the fields are filled */\n          var kids = event.target.getElementsByTagName('input');\n          for (var i = 0; i < kids.length; i++) {\n               //console.log (kids[i].id + ' - ' + kids[i].value);\n               /* Check that is not empty */\n               if (kids[i].value == '') {\n                    if (kids[i].name == 'author' || kids[i].name == 'email' || kids[i].name == 'comment' || kids[i].name == 'rating') {\n                         errorfound = errorMessage(kids[i], kids[i].name);\n                    }\n               }\n               /* Check that valid */\n               else if (kids[i].name == 'email') {\n\n                         if (!isEmail(kids[i].value)) {\n                              errorfound = errorMessage(kids[i], kids[i].name);\n                         }\n                    } else if (kids[i].name == 'rating') {\n                         if (kids[i].value != 1 && kids[i].value != 2 && kids[i].value != 3 && kids[i].value != 4 && kids[i].value != 5) {\n                              errorfound = errorMessage(kids[i], kids[i].name);\n                         }\n                    } else if (kids[i].name == 'phone') {\n\n                         if (!phone_validate(kids[i].value)) {\n                              errorfound = errorMessage(kids[i], kids[i].name);\n                         }\n                    } else if (kids[i].name == 'url') {\n                         if (!/^(http|https|ftp):\\/\\/[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/i.test(kids[i].value)) {\n                              errorfound = errorMessage(kids[i], kids[i].name);\n                         }\n                    }\n          }\n          /* now for the text area */\n          kids = event.target.getElementsByTagName('textarea');\n          for (var i = 0; i < kids.length; i++) {\n               if (kids[i].value == '') {\n                    errorfound = errorMessage(kids[i], kids[i].name);\n               }\n          }\n          /* if we reach this point means no errors were found */\n          /* ajax submit */\n          if (errorfound) {\n               return !errorfound;\n          } else {\n               ajaxSubmitForm(event);\n          }\n     });\n     function isEmail(email) {\n          var regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n          return regex.test(email);\n     }\n     function phone_validate(phno) {\n          var regexPattern = new RegExp(/^[0-9-+]+$/); // regular expression pattern\n          return regexPattern.test(phno);\n     }\n     function ajaxSubmitForm(event) {\n          var commentForm = event.target;\n          resetMessages(commentForm);\n          //ajax http post request\n          var url = document.getElementById('data-url').value;\n\n          /* We are going to use the fetch method of VanillaJS so we need to prepare the parameters.*/\n          var params = new URLSearchParams(new FormData(commentForm));\n          /* We display something to show the user the form is being processed */\n          commentForm.querySelector('.js-form-submission').classList.add('show');\n          fetch(url, {\n               method: \"POST\",\n               body: params\n          }).then(function (res) {\n               return res.json();\n          }).catch(function (error) {\n               resetMessages(commentForm);\n               commentForm.querySelector('.js-form-submission').classList.add('show');\n          }).then(function (response) {\n               resetMessages(commentForm);\n               console.log(response);\n               /* Deal with the response */\n               if (response === 0 || response.status === 'error') {\n                    alert(response.message);\n                    commentForm.querySelector('.js-form-error').classList.add('show');\n                    return;\n               }\n               commentForm.querySelector('.js-form-success').classList.add('show');\n               commentForm.reset();\n               resetStars();\n          });\n     }\n     function errorMessage(e, fieldName) {\n          console.log('errorMessage - ' + fieldName);\n          return true;\n     }\n     function resetStars() {\n          for (var i = 1; i < 6; i++) {\n               $(\"#input_rating_\" + i).addClass(\"inactive-star\");\n               $(\"#input_rating_\" + i).removeClass(\"active-star\");\n          }\n     }\n     function resetMessages(commentForm) {\n          commentForm.querySelector('.js-form-submission').classList.remove('show');\n          commentForm.querySelector('.js-form-error').classList.remove('show');\n          commentForm.querySelector('.js-form-success').classList.remove('show');\n     }\n});\n\n},{}]},{},[1]);\n"]}